# Autogen æ™ºèƒ½åŠ©æ‰‹ç³»ç»Ÿ - é¡¹ç›®æ–‡æ¡£ä»‹ç»

## ğŸ“˜ ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº [Autogen](https://github.com/microsoft/autogen) æ¡†æ¶çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿï¼Œæ„å»ºäº†ä¸€ä¸ªé¢å‘ iPhone æ‰‹æœºé”€å”®åœºæ™¯çš„å¯¹è¯ä»£ç†å›¢é˜Ÿã€‚é€šè¿‡å¼•å…¥æ¨¡å‹æµå¼å¯¹è¯ã€å¤šä»£ç†ä»»åŠ¡åˆ†å·¥ã€ä»»åŠ¡çŠ¶æ€æŒä¹…åŒ–ã€æ•°æ®åº“äº¤äº’å’Œå›¾ç»“æ„æµç¨‹æ§åˆ¶ï¼Œé¡¹ç›®å®ç°äº†ä¸€ä¸ªå…·æœ‰ä¸°å¯ŒåŠŸèƒ½çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿã€‚

## ğŸ‘¤ é¢å‘å¯¹è±¡

æœ¬é¡¹ç›®ä¸»è¦é€‚ç”¨äºä»¥ä¸‹äººç¾¤ï¼š

- AI åº”ç”¨å¼€å‘è€…
- LLM å¤šæ™ºèƒ½ä½“ç³»ç»Ÿç ”ç©¶äººå‘˜
- è‡ªåŠ¨åŒ–å¯¹è¯ç³»ç»Ÿå¼€å‘è€…
- æ•™å­¦æˆ–è¯¾ç¨‹è‡ªæµ‹è¯„åˆ†åœºæ™¯

## ğŸ“‚ é¡¹ç›®åŠŸèƒ½æ€»è§ˆ

- âœ… æ”¯æŒå¤šä¸ª Agent ååŒå·¥ä½œï¼ˆé”€å”®ã€ä¿¡æ¯æŸ¥è¯¢ã€å”®åï¼‰
- âœ… æ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆåº“å­˜æŸ¥è¯¢ã€ä»·æ ¼æŸ¥è¯¢ï¼‰
- âœ… æ”¯æŒå¤šç§å›¢é˜Ÿåä½œæ¨¡å¼ï¼ˆè½®è¯¢ã€é€‰æ‹©å™¨ã€Swarmã€å›¾ç»“æ„æµç¨‹ï¼‰
- âœ… æ”¯æŒæµå¼å“åº”æ˜¾ç¤ºï¼ˆStreamingï¼‰
- âœ… æ”¯æŒä»»åŠ¡çŠ¶æ€ä¿å­˜ä¸æ¢å¤ï¼ˆåŒ…æ‹¬ JSON æ–‡ä»¶ä¸æ•°æ®åº“ MySQLï¼‰
- âœ… æ”¯æŒä»»åŠ¡ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨ï¼ˆMySQLï¼‰
- âœ… æ”¯æŒ Agent Memory èƒ½åŠ›ï¼ˆè®°å¿†ç”¨æˆ·åå¥½ï¼‰

## ğŸ§  ä¸»è¦ç»„ä»¶è¯´æ˜

### æ¨¡å‹å®¢æˆ·ç«¯é…ç½®

ä½¿ç”¨ `OpenAIChatCompletionClient` æŒ‡å®šè‡ªå®šä¹‰ API æ¥å£ï¼Œå¦‚ Qwen æ¨¡å‹ï¼š

```python
model_client = OpenAIChatCompletionClient(
    model="Qwen/QwQ-32B",
    api_key="...",
    base_url="https://api.siliconflow.cn/v1",
    ...
)
```

### æ™ºèƒ½ä½“å®šä¹‰

- `begin_agent`ï¼šå‰ç«¯é”€å”®åŠ©æ‰‹ï¼Œè´Ÿè´£æ–°å“ä»‹ç»ä¸å…´è¶£å¼•å¯¼ï¼Œå…·å¤‡handoffèƒ½åŠ›
- `info_agent`ï¼šä¿¡æ¯åŠ©æ‰‹ï¼Œè°ƒç”¨å·¥å…·æŸ¥è¯¢åº“å­˜ä¸ä»·æ ¼
- `after_agent`ï¼šå”®åæœåŠ¡åŠ©æ‰‹ï¼Œå¤„ç†ç”¨æˆ·å”®åé—®é¢˜

### å·¥å…·è°ƒç”¨

å®šä¹‰äº†ä¸¤ä¸ªå¼‚æ­¥å·¥å…·å‡½æ•°ï¼š

```python
async def query_stock(model: str) -> str
async def query_price(model: str) -> str
```

ä¾› `info_agent` ä½¿ç”¨ä»¥è¿”å›æŸ¥è¯¢ç»“æœã€‚

### å›¢é˜Ÿåä½œæ¨¡å¼

é¡¹ç›®æ¼”ç¤ºäº†ä»¥ä¸‹å›¢é˜Ÿåä½œç»“æ„ï¼š

- `SelectorGroupChat`ï¼šåŸºäºå‘è¨€ç­–ç•¥è‡ªåŠ¨é€‰æ‹© Agent
- `Swarm`ï¼šæ‰€æœ‰ Agent å¹¶å‘å¤„ç†ä»»åŠ¡ï¼Œè‡ªæˆ‘æ¿€æ´»
- `GraphFlow`ï¼šåŸºäºå›¾ç»“æ„çš„é¡ºåºæ‰§è¡Œ Agentï¼ˆä¾‹å¦‚ï¼šbegin â†’ info â†’ afterï¼‰

### ç»ˆæ­¢æ¡ä»¶

ç»„åˆä½¿ç”¨ï¼š

```python
termination = SourceMatchTermination([...]) | TextMentionTermination("ç»ˆæ­¢")
```

ä»¥æ§åˆ¶ä»»åŠ¡ç»ˆæ­¢ã€‚

## ğŸ’¾ çŠ¶æ€ç®¡ç†åŠŸèƒ½

### JSON æ–‡ä»¶å­˜å‚¨

æ”¯æŒé€šè¿‡ `team.save_state()` ä¸ `load_state()` ä¿å­˜/åŠ è½½ä»»åŠ¡çŠ¶æ€ï¼š

```python
with open("agent_state.json", "w") ...
await team.load_state(...)
```

### æ•°æ®åº“ç®¡ç†ï¼ˆMySQLï¼‰

å°è£…ç±» `DBManager`ï¼š

- `create_task()` åˆ›å»ºä»»åŠ¡è®°å½•
- `update_task_status()` æ›´æ–°ä»»åŠ¡çŠ¶æ€
- `add_message()` æ’å…¥ä»»åŠ¡å¯¹è¯ä¿¡æ¯
- `get_messages_for_task()` æŸ¥è¯¢å†å²è®°å½•

## âœ… ç¤ºä¾‹ä»»åŠ¡è¿è¡Œ

ä»»åŠ¡ç¤ºä¾‹ï¼šæ¨è iPhone æœºå‹ï¼ŒæŸ¥è¯¢åº“å­˜ä»·æ ¼ï¼Œå±•ç¤ºå”®åæµç¨‹

```python
await Console(team.run_stream(
    task="æˆ‘æƒ³äº†è§£ä¸€ä¸‹iPhone17å’ŒiPhone16Proï¼Œå“ªä¸ªæ›´å€¼å¾—ä¹°ï¼Ÿæœ‰ç°è´§å—ï¼Ÿå”®åæ€ä¹ˆæ ·ï¼Ÿ"
))
```

## ğŸ§  Agent Memory ç¤ºä¾‹

å¯æ‰©å±• `memory_agent`ï¼Œé›†æˆ `ListMemory` ç»„ä»¶ï¼Œæ”¯æŒç”¨æˆ·ä¿¡æ¯è®°å¿†ï¼ˆä¾‹å¦‚å¤©æ°”å•ä½åå¥½ã€é¥®é£Ÿåå¥½ç­‰ï¼‰ã€‚

## ğŸš€ å¯åŠ¨æ–¹å¼

```bash
python test_agent_stream.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„è¯´æ˜

| æ–‡ä»¶                   | æè¿°                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `test_agent_stream.py` | ä¸»é€»è¾‘è„šæœ¬ï¼ŒåŒ…å«æ¨¡å‹æ¥å…¥ã€Agent å®šä¹‰ã€å›¢é˜Ÿåä½œç»“æ„ä¸çŠ¶æ€ä¿å­˜ |
| `agent_state.json`     | ä»»åŠ¡çŠ¶æ€ä¿å­˜æ–‡ä»¶ï¼ˆè¿è¡Œä¸­è‡ªåŠ¨ç”Ÿæˆï¼‰                           |
| MySQL æ•°æ®åº“           | ç”¨äºæŒä¹…åŒ–å­˜å‚¨ä»»åŠ¡åŠæ¶ˆæ¯è®°å½•                                 |

## ğŸ“Œ æ³¨æ„äº‹é¡¹

- è¯·æ›¿æ¢ `model_client` ä¸­çš„ API Key å’Œæ¨¡å‹åç§°ä¸ºä½ è‡ªå·±çš„ã€‚
- MySQL éœ€é¢„å…ˆåˆ›å»º `llm_test` æ•°æ®åº“ï¼Œè‡ªåŠ¨å»ºè¡¨ã€‚
- å¦‚éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ Streamlitã€Gradio ç­‰æ¡†æ¶è¿›è¡Œå°è£…å±•ç¤ºã€‚

---

## ğŸ“® è”ç³»ä¸åé¦ˆ

å¦‚éœ€è¿›ä¸€æ­¥ä¼˜åŒ–æˆ–å¯¹æ¥ Web é¡µé¢ã€APIï¼Œè¯·è”ç³»å¼€å‘è€…æˆ–æäº¤ issueã€‚
